from aiogram.dispatcher import Dispatcher
from aiogram import types
import os, random
from pathlib import Path
from handlers.fight import HPCut
from handlers.raid import bossHPCut
from handlers.registration import reRegMoney
from handlers.work import workTime
from utils import ParseSeconds

FILE = Path(__file__).resolve()
ROOT = FILE.parents[1]


async def welcomeMessage(message: types.Message):
    text = f'''<b>–ü—Ä–∏–≤–µ—Ç—Å–≤—É—é —Ç–µ–±—è!</b>

–Ø - <b>–ú–µ—Ö–∞–Ω–æ–±–æ—Ç</b>, –∏–≥—Ä–æ–≤–æ–π –±–æ—Ç –≤ —Å—Ç–∏–ª–µ –Ω–µ–π—Ä–æ–Ω–Ω–æ–≥–æ —Å—Ç–∏–º–ø–∞–Ω–∫–∞

–î–æ–±–∞–≤–ª—è–π –º–µ–Ω—è –≤ —Å–≤–æ–π —á–∞—Ç –∫ –¥—Ä—É–∑—å—è–º, –¥–∞–≤–∞–π –∞–¥–º–∏–Ω–∫—É –∏ –≤–º–µ—Å—Ç–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ:

üë∑‚Äç‚ôÇÔ∏è <i>–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–µ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞-–∏–Ω–∂–µ–Ω–µ—Ä–∞</i>. 

‚öî <i>–£—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –¥—É—ç–ª–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∏–Ω–∂–µ–Ω–µ—Ä–∞–º–∏</i>.

üèãÔ∏è‚Äç‚ôÄÔ∏è <i>–í—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏</i>.

üè¢ <i>–•–æ–¥–∏—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É</i>.

üéâ  <i>–û—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</i>.

üèÖ <i>–£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∫–≤–∏–∑–∞—Ö</i>.

üëπ <i>–°–æ–±–∏—Ä–∞—Ç—å —Ä–µ–π–¥—ã –Ω–∞ –±–æ—Å—Å–∞</i>.

ü¶æ –ü—Ä–æ–∫–∞—á–∏–≤–∞–π—Ç–µ—Å—å, —Ç—Ä–∞—Ç—å—Ç–µ –¥–µ–Ω—å–≥–∏ –Ω–∞ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏, –ø–æ–ª—É—á–∞–π—Ç–µ –∞–º—É–Ω–∏—Ü–∏—é —Å –±–æ—Å—Å–æ–≤ –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –∞—á–∏–≤–∫–∏. –°—Ç–∞–Ω—å—Ç–µ –∏–Ω–∂–µ–Ω–µ—Ä–æ–º –º–µ—Å—Å—è—Ü–∞!'''

    await message.answer_photo(caption=text, parse_mode='HTML',
                         photo=open(ROOT / 'static/start/OmegaHello.jpg', 'rb'))
    

helpSections: dict[str, str] = {
    "–û–±—â–∏–π": '<b>–ö–∞–∫–æ–π —Ä–∞–∑–µ–ª –ú–µ—Ö–∞–Ω–æ–±–æ—Ç–∞ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?</b>',
    "–ü–µ—Ä—Å–æ–Ω–∞–∂": f"""
<b>–ü–µ—Ä—Å–æ–Ω–∞–∂</b>
–ö–æ–º–∞–Ω–¥—ã:
/registration - —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
/cancel - –æ—Ç–º–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
/avatar_change - —Å–º–µ–Ω–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
/avatar - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –±–∞—Ñ—Ñ—ã –∏ —Ö–∞—Ä-–∫–∏
/inventory - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

–°–º–µ–Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –±—É–¥–µ—Ç —Å—Ç–æ–∏—Ç –≤–∞–º {reRegMoney}.""",
    "–î—É—ç–ª—å": f"""
<b>–î—É—ç–ª–∏</b>
–ö–æ–º–∞–Ω–¥—ã:
/duel - –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–Ω–∂–µ–Ω–µ—Ä–∞ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥–æ–π —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –Ω–∞ –¥—É—ç–ª—å
/duel_accept - –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥—É—ç–ª—å
/duel_refuse - –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –¥—É—ç–ª–∏ 

–í–∞—à–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ –≤ –±–æ—é –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–¥–æ—Ä–æ–≤—å—è –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.
–ü—Ä–∏ –ª—é–±–æ–º –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –±–∏—Ç–≤—ã –æ–±–∞ –±–æ–π—Ü–∞ —Ç—Ä–∞—Ç—è—Ç {HPCut} —Ö–ø –∑–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Å—Ö–≤–∞—Ç–∫–∏.
–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –±–æ–π –ø—Ä–∏ –ª—é–±–æ–º —Ö–ø, –∫—Ä–æ–º–µ –Ω—É–ª–µ–≤–æ–≥–æ.
–ß–µ–º –º–µ–Ω—å—à–µ —É –≤–∞—Å —Ö–ø - —Ç–µ–º —Ç—Ä—É–¥–Ω–µ–µ –ø–æ–±–µ–¥–∏—Ç—å, –Ω–æ –ª—É—á—à–µ –Ω–∞–≥—Ä–∞–¥–∞!
–¢–∞–∫–∂–µ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —á—Ç–æ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø–æ—Ä–∞–∂–µ–Ω–∏—é...""",
    "–ó–∞–¥–∞–Ω–∏—è":f"""
    <b>–ó–∞–¥–∞–Ω–∏—è</b>
–ö–æ–º–∞–Ω–¥—ã:
/task - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π 
/task_given - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π
/task_taken - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –≤–∑—è—Ç—ã—Ö –∑–∞–¥–∞–Ω–∏–π
/task_take [–Ω–æ–º–µ—Ä] - –≤–∑—è—Ç—å –∑–∞–¥–∞–Ω–∏–µ –ø–æ–¥ –¥–∞–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º
/task_add - –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –¥–æ—Å–∫—É
/task_cancel - –æ—Ç–º–µ–Ω–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ 

–ù–∞ –¥–æ—Å–∫–µ –æ–±—å—è–≤–ª–µ–Ω–∏–π –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å —Å–≤–æ–µ –ª—é–±–æ–µ –∑–∞–¥–∞–Ω–∏–µ, –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∑–∞ –Ω–µ–≥–æ –Ω–∞–≥—Ä–∞–¥—É –∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
–ù–∞–≥—Ä–∞–¥—É –≤—ã –ø–ª–∞—Ç–∏—Ç–µ –∏–∑ —Å–≤–æ–µ–≥–æ –∫–∞—Ä–º–∞–Ω–∞, –∞–¥–º–∏–Ω—ã —á–∞—Ç–∞ –ø–ª–∞—Ç—è—Ç –≤ –¥–≤–∞ —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ. 

–í–∑—è—Ç–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç —Å –¥–æ—Å–∫–∏, –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –Ω–µ–≥–æ –º–æ–∂–Ω–æ –≤ —Å–≤–æ–µ–º —Å–ø–∏—Å–∫–µ. 
<b>–ü–æ–º–Ω–∏—Ç–µ</b>, —á—Ç–æ –æ—Ç–º–µ–Ω–∞ –∑–∞–¥–∞–Ω–∏—è, –¥–µ–¥–ª–∞–π–Ω –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ—à–µ–ª —É–∂–µ –Ω–∞ —Ç—Ä–µ—Ç—å,–±—É–¥–µ—Ç –Ω–∞–∫–∞–∑–∞–Ω–∞, 
–∑–∞ –≤–∞–º–∏ –ø—Ä–∏–¥–µ—Ç <i>–û–Ω</i>...

–ó–∞—á–µ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –≤–∞–º –º–æ–∂–µ—Ç —á–µ–ª–æ–≤–µ–∫, –≤—ã—Å—Ç–∞–≤–∏–≤—à–∏–π –µ–≥–æ, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –Ω–µ–º—É. 
–¢–∞–∫–∂–µ –∑–∞ —Ç—Ä–µ—Ç—å –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –∫–æ–Ω—Ü–∞ –∑–∞–¥–∞–Ω–∏—è –≤–∞–º –ø—Ä–∏–¥–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞ –≤ –ª–∏—á–∫—É, —Ç–∞–∫ —á—Ç–æ –≤–∫–ª—é—á–∏—Ç–µ –ú–µ—Ö–∞–Ω–æ–ë–æ—Ç–∞ –¥–ª—è —Å–µ–±—è!
""",
    "–†–∞–±–æ—Ç–∞": f"""
    <b>–†–∞–±–æ—Ç–∞</b>
–ö–æ–º–∞–Ω–¥—ã:
/work - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã
/work_escape - —Å–±–µ–∂–∞—Ç—å –¥–æ—Å—Ä–æ—á–Ω–æ —Å —Ä–∞–±–æ—Ç—ã

–ü–æ–∫–∞ –≤—ã —Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ, –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ–µ–≥–æ –º–µ—Ö–∞–Ω–∏–∫–∞ —Ç–æ–∂–µ —Ç—Ä—É–¥–∏—Ç—å—Å—è. 
–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: {ParseSeconds(workTime)}
–í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∞—Ç—å –¥—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è.
–°–±–µ–≥–∞–Ω–∏–µ –¥–æ—Å—Ä–æ—á–Ω–æ —Å —Ä–∞–±–æ—Ç—ã –Ω–µ –¥–∞–µ—Ç –≤–∞–º –Ω–∞–≥—Ä–∞–¥—ã.
""",
    "–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è": f"""
    <b>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</b>
–ö–æ–º–∞–Ω–¥—ã:
/event - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–≤–µ–Ω—Ç—ã
/event_create - –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
/event_cancel - –æ—Ç–º–µ–Ω–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
/event_delete - —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
/event_end - –∑–∞–∫–æ–Ω–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
/event_kick - –≤—ã–≥–Ω–∞—Ç—å —á–µ–ª–æ–≤–µ–∫–∞ —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è

–ü–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏–∑ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —Å—é–¥–∞.
–ó–∞ –ø—Ä–∏—Å—É—Ç—Å–≤–∏–µ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã, –Ω–æ –Ω–µ —Ö–∞–ª—å—Ç—É—Ä—å—Ç–µ, –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –≤—ã–≥–Ω–∞—Ç—å –≤–∞—Å –Ω–∞ "–º–Ω–∏–º–æ–µ" –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ.

–¢–∞–∫–∂–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∑–∞ —á–∞—Å –∏ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤ –ª–∏—á–∫—É, —Ç–∞–∫ —á—Ç–æ –≤–∫–ª—é—á–∏—Ç–µ –ú–µ—Ö–∞–Ω–æ–ë–æ—Ç–∞ –¥–ª—è —Å–µ–±—è!
""",
    "–†–µ–π–¥—ã": f"""
    <b>–†–µ–π–¥—ã</b>
–ö–æ–º–∞–Ω–¥—ã:
/raid - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –±–æ—Å—Å–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ —É—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ö–æ–∂
/raid_leave - –ø–æ–∫–∏–Ω—É—Ç—å —Ä–µ–π–¥ –Ω–∞ —Å—Ç–∞–¥–∏–∏ –Ω–∞–±–æ—Ä–∞

–†–µ–π–¥—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –≥—Ä—É–ø–ø–æ–≤—ã–µ –±–æ–∏ –ø—Ä–æ—Ç–∏–≤ –æ–¥–Ω–æ–≥–æ –º–æ—â–Ω–æ–≥–æ –≤—Ä–∞–≥–∞.
–í –±–æ—é –º–æ–∂–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ—Ç –¥–≤—É—Ö –¥–æ 15 —á–µ–ª–æ–≤–µ–∫. 

–ü—Ä–∏ –ª—é–±–æ–º –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –±–∏—Ç–≤—ã –≤—Å–µ –±–æ–π—Ü—ã —Ç—Ä–∞—Ç—è—Ç {bossHPCut} —Ö–ø –∑–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Å—Ö–≤–∞—Ç–∫–∏.
–ü–æ—Å–ª–µ –ø–æ–±–µ–¥—ã –Ω–∞–≥—Ä–∞–¥—É –∑–∞ –±–æ—Å—Å–∞ –¥–µ–ª—è—Ç –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å—Ö–≤–∞—Ç–∫–∏, –¥–æ–ª—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—Å–µ–Ω–Ω–æ–≥–æ –±–æ—Å—Å—É —É—Ä–æ–Ω–∞.

–¢–∞–∫–∂–µ –º–µ–∂–¥—É –∂–∏–≤—ã–º–∏ –±–æ–π—Ü–∞–º–∏ –±—É–¥–µ—Ç —Ä–∞–∑—ã–≥—Ä–∞–Ω –æ–¥–∏–Ω —Ç—Ä–æ—Ñ–µ–π —Å –±–æ—Å—Å–∞ –≤ –≤–∏–¥–µ –ø—Ä–µ–¥–º–µ—Ç–∞. 
""",
    "–í–∏–∫—Ç–æ—Ä–∏–Ω—ã": f"""
    <b>–í–∏–∫—Ç–æ—Ä–∏–Ω—ã</b>
–ö–æ–º–∞–Ω–¥—ã:
/quiz - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∏–∫—Ç–æ—Ä–∏–Ω
/quiz_enter - –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –≤–∏–∫—Ç–æ—Ä–∏–Ω–µ
/quiz_leave - –ø–æ–∫–∏–Ω—É—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É –Ω–∞ –ª—é–±–æ–π —Å—Ç–∞–¥–∏–∏

–£—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã, –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ —Å–ª—É—á–∞–π–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä–≤—ã–º –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã.
""",
    "–ê—á–∏–≤–∫–∏": f"""
–ö–æ–º–∞–Ω–¥—ã:
/achiv - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö –∞—á–∏–≤–æ–∫

–í—Å–µ –≤–∞—à–∏ —É—Å–ø–µ—Ö–∏ –∏ –ø–æ—Ä–∞–∂–µ–Ω–∏—è –û–º–µ—Ö–∞–ª—é–ª—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏ –≤—ã–¥–∞–µ—Ç –≤–∞–º –∞—á–∏–≤–∫–∏ –∑–∞ —ç—Ç–æ.
–£—Å–ª–æ–≤–∏—è –∞—á–∏–≤–æ–∫ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.""",
    "–î–∏–∞–ª–æ–≥ —Å –ú–µ—Ö–∞–Ω–æ–ë–æ—Ç–æ–º": f"""
    <b>–î–∏–∞–ª–æ–≥</b>
–ö–æ–º–∞–Ω–¥—ã:
/talk - –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –ú–µ—Ö–∞–Ω–æ–ë–æ—Ç–æ–º.

–ü–æ—Å–ª–µ –≤–≤–µ–¥–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å.
–†–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π –º–æ–¥—É–ª—å –ú–µ—Ö–∞–Ω–æ–ë–æ—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ ChatGPT.""",
    "–ò–≥—Ä–∞ –≤ –∫–æ—Å—Ç–∏": f"""
    <b>–ò–≥—Ä–∞ –≤ –∫–æ—Å—Ç–∏</b>
–ö–æ–º–∞–Ω–¥—ã:
/dice - –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É –≤ –∫–æ—Å—Ç–∏

–°—ã–≥—Ä–∞–π –≤ –ø—Ä–æ—Å—Ç—É—é –∏–≥—Ä—É —Å–æ —Å—Ç–∞—Ä–∏–∫–æ–º –≠–π–ë–∏–≠–º'–æ–º.
–ò –ø—É—Å—Ç—å –≤–∞—à–∞ <i>—É–¥–∞—á–∞</i> –ø–æ–º–æ–∂–µ—Ç –≤–∞–º.
–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∫–∞–∫–∞—è —É–¥–∞—á–∞ —É —ç—Ç–æ–≥–æ —Ö–∏—Ç—Ä–æ–≥–æ –¥–µ–¥–∞ ..?
"""
}
   


async def getHelp(message: types.Message):
    keyboard = types.InlineKeyboardMarkup()
    for helpSection in list(helpSections.keys())[1:]:
        keyboard.add(
            types.InlineKeyboardButton(text=helpSection, callback_data=f'help:{helpSection}_{message.from_user.id}')
        )
    await message.reply_photo(
        caption='<b>–ö–∞–∫–æ–π —Ä–∞–∑–¥–µ–ª –ú–µ—Ö–∞–Ω–æ–±–æ—Ç–∞ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?</b>',
        parse_mode='HTMl',
        photo=open(ROOT / 'static/info/' / random.choice(os.listdir(ROOT / 'static/info')), 'rb'),
        reply_markup=keyboard
    )

async def getHelpSection(call: types.CallbackQuery):
    section, userId = call.data.replace('help:','').split('_')
    userId = int(userId)
    if call.from_user.id != userId:
        await call.answer('–≠—Ç–æ –Ω–µ –≤–∞—à–µ')
        return
    keyboard = types.InlineKeyboardMarkup()
    if section == '–û–±—â–∏–π':
        for helpSection in list(helpSections.keys())[1:]:
            keyboard.add(
                types.InlineKeyboardButton(text=helpSection, callback_data=f'help:{helpSection}_{call.from_user.id}')
            )   
    else:
        keyboard.add(
            types.InlineKeyboardButton(text='–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –≤—ã–±–æ—Ä—É —Ä–∞–∑–¥–µ–ª–∞', callback_data=f'help:–û–±—â–∏–π_{call.from_user.id}')
        )
    media = types.input_media.InputMediaPhoto(
        media=types.InputFile(ROOT / 'static/info/' / random.choice(os.listdir(ROOT / 'static/info'))), 
        caption=helpSections[section], 
        parse_mode='HTML')
    await call.message.edit_media(
        media=media,
        reply_markup=keyboard
    )


def register_handlers_info(dp: Dispatcher):
    dp.register_message_handler(getHelp, commands='help', state='*')
    dp.register_message_handler(welcomeMessage, commands='start', state=None)
    dp.register_callback_query_handler(getHelpSection, regexp='^help:', state='*')
